<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–¶–≤–µ—Ç–æ–≤–æ–µ –ø–æ–ª–µ</title>
    <link rel="stylesheet" href="/main.css">
    <style>
        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body {
            margin: 0;
            min-height: 100vh;
            background: #111;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
        }
        .wrapper { width: 95%; max-width: 1200px; padding-top: 100px }
        h1 { text-align: center; font-weight: 400; margin-bottom: 15px; }

        button {
            display: block;
            margin: 0 auto 15px;
            padding: 8px 20px;
            font-size: 16px;
            border-radius: 8px;
            border: none;
            background: #ff6b81;
            color: #fff;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        button.flexButton{
            margin: 0 !important;
            border-radius: 100%;
            width: 50px !important;
            height: 50px !important;
            border: 1px solid white;
            background: none;
            display: flex;
            align-items: center; 
            justify-content: center;
        }
        button:hover { background: #ff4a66; }
        button:disabled {opacity: 0.2; cursor: default}
        .score{
            margin-bottom: 30px;
        }
        .board {
            display: grid;
            grid-template-columns: 40px repeat(24, 1fr);
            gap: 4px;
        }
        .label {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            opacity: 0.7;
            user-select: none;
        }
        .tile {
            aspect-ratio: 1 / 1;
            border-radius: 6px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease;
        }
        .tile:hover { transform: scale(1.05); box-shadow: 0 0 0 2px rgba(255,255,255,0.35); }
        .tile.selected { outline: 3px solid white; transform: scale(1.08); }
        .hint { margin-top: 18px; text-align: center; opacity: 0.7; font-size: 14px; }

        @media (max-width: 900px) {
            .board { grid-template-columns: 30px repeat(16, 1fr); }
        }
    </style>
</head>
<body>
<header>
        <ul>
            <li>
                <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
            </li>
            <li>
                <a href="/pages/relationship.html">–û—Ç–Ω–æ—à–µ–Ω–∏—è</a>
            </li>
            <li>
                <a href="/pages/relationship.html#distance">–ö–∞—Ä—Ç–∞</a>
            </li>
            <li>
                <a href="/pages/colors.html">–¶–≤–µ—Ç–∞</a>
            </li>
            <li>
                <a href="/pages/true.html">–ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –ø—Ä–∞–≤–¥–∞</a>
            </li>
        </ul>
    </header>
<div class="wrapper">
    <h1>–í—ã–±–µ—Ä–∏ —Ü–≤–µ—Ç</h1>
    <div class="score" style="display: flex; justify-content: center; align-items: center; gap: 80px;"><button class="flexButton" id="minus">-</button><h2 style="text-align: center;">–û—á–∫–∏: <span id="scoreCount">0</span></h2> <button id="plus" class="flexButton">+</button></div>
    <button id="randomBtn">üé≤ –°–ª—É—á–∞–π–Ω—ã–π —Ü–≤–µ—Ç</button>
    <p id="coordText" style="text-align:center; margin-bottom: 20px;"></p>
    <div class="board" id="board"></div>
    <button id="submitButton" disabled style="margin-top: 20px; background-color: rgb(12, 89, 12);">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–±–æ—Ä</button>
</div>

<script>
const board = document.getElementById('board');
const rows = 16; // –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ
const cols = 24; // –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ
const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
let selectedTile = null;
let lastCenterTile = null;

let score = 0;

// —Ö—Ä–∞–Ω–∏–º –≤—Å–µ —Ç–∞–π–ª—ã –≤ –º–∞—Å—Å–∏–≤ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞
const tiles = [];

// ‚îÄ‚îÄ –≤–µ—Ä—Ö–Ω—è—è —Å—Ç—Ä–æ–∫–∞ —Ü–∏—Ñ—Ä
board.appendChild(document.createElement('div')); // –ø—É—Å—Ç–æ–π —É–≥–æ–ª
for (let x = 0; x < cols; x++) {
    const label = document.createElement('div');
    label.className = 'label';
    label.textContent = x + 1;
    board.appendChild(label);
}

// ‚îÄ‚îÄ –æ—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç–∫–∞
for (let y = 0; y < rows; y++) {
    // –±—É–∫–≤—ã —Å–ª–µ–≤–∞
    const label = document.createElement('div');
    label.className = 'label';
    label.textContent = letters[y];
    board.appendChild(label);

    for (let x = 0; x < cols; x++) {
        const tile = document.createElement('div');
        tile.className = 'tile';

        // ===== –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã =====
        const hue = Math.round((x / (cols - 1)) * 360);
        const saturation = 65 + Math.random() * 10;
        const lightness = 25 + (y / (rows - 1)) * 50;

        tile.style.backgroundColor = `hsl(${hue}, ${saturation}%, ${lightness}%)`;

        tile.dataset.coord = letters[y] + (x + 1); // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É
        tile.dataset.row = y;
        tile.dataset.col = x;

        tile.addEventListener('click', () => {
            clickOnTile(tile);
        });

        board.appendChild(tile);
        tiles.push(tile);
    }
}

function selectTile(tile) {
    if (selectedTile) selectedTile.classList.remove('selected');
    tile.classList.add('selected');
    selectedTile = tile;
}

function clickOnTile(centerTile) {
    lastCenterTile = centerTile;
    let submit = document.getElementById("submitButton");
    if (submit.disabled) {
        submit.disabled = false;
    }

    // –æ—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ
    tiles.forEach(tile => tile.classList.remove('selected'));

    const centerRow = parseInt(centerTile.dataset.row);
    const centerCol = parseInt(centerTile.dataset.col);

    tiles.forEach(tile => {
        const r = parseInt(tile.dataset.row);
        const c = parseInt(tile.dataset.col);

        if (
            r >= centerRow - 2 && r <= centerRow + 2 &&
            c >= centerCol - 2 && c <= centerCol + 2
        ) {
            tile.classList.add('selected');
        }
    });

    coordText.textContent = `–í—ã–±—Ä–∞–Ω —Ü–µ–Ω—Ç—Ä: ${centerTile.dataset.coord}`;
}


// –∫–Ω–æ–ø–∫–∞ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞
document.getElementById('randomBtn').addEventListener('click', () => {
    const randomIndex = Math.floor(Math.random() * tiles.length);
    const randomTile = tiles[randomIndex];
    selectTile(randomTile);
    const coordText = document.getElementById("coordText");
    coordText.textContent = `–°–ª—É—á–∞–π–Ω—ã–π —Ü–≤–µ—Ç: ${randomTile.dataset.coord}`;
});
document.getElementById('submitButton').addEventListener('click', () => {
    const guessed = prompt("–í–≤–µ–¥–∏—Ç–µ —Ü–≤–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –∑–∞–≥–∞–¥–∞–Ω (–≤ —Ñ–æ—Ä–º–∞—Ç–µ 'A1'):");
    if (!guessed || !lastCenterTile) return;

    const targetTile = [...tiles].find(
        t => t.dataset.coord === guessed
    );

    if (!targetTile || !targetTile.classList.contains('selected')) {
        alert("–û—á–∫–∏: 0");
        return;
    }

    const cr = parseInt(lastCenterTile.dataset.row);
    const cc = parseInt(lastCenterTile.dataset.col);
    const tr = parseInt(targetTile.dataset.row);
    const tc = parseInt(targetTile.dataset.col);

    const distance = Math.max(
    Math.abs(cr - tr),
    Math.abs(cc - tc)
);

const maxDistance = 2; // —Ä–∞–¥–∏—É—Å –ø–æ–ª—è 5x5
const currentScore = maxDistance - distance + 1;
    alert(`–û—á–∫–∏: ${currentScore}`);
    let myScore = parseInt(document.getElementById('scoreCount').innerText, 10);
    document.getElementById('scoreCount').innerText = myScore + currentScore;
    score = myScore + currentScore;
});
document.getElementById('minus').addEventListener('click', () => {
    if(score > 0){
        score--;
    }
    document.getElementById('scoreCount').innerText = score;
})
document.getElementById('plus').addEventListener('click', () => {
    score++;
    document.getElementById('scoreCount').innerText = score;
})
</script>

</body>
</html>
